<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RP2350 C from Scratch</title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <style>
    /* Custom prose styling since Tailwind prose isn't available in CDN */
    .prose {
      color: #374151;
      max-width: none;
    }
    .prose h1:first-of-type, .prose h2:first-of-type, .prose h3:first-of-type, .prose h4:first-of-type, .prose h5:first-of-type, .prose h6:first-of-type {
      margin-top: 0;
    }
    .prose h1 {
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 0.75rem;
      margin-top: 1.5rem;
      color: #111827;
      line-height: 1.25;
    }
    .prose h2 {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      margin-top: 1.25rem;
      color: #111827;
      line-height: 1.3;
    }
    .prose h3 {
      font-size: 1.125rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      margin-top: 1rem;
      color: #111827;
      line-height: 1.35;
    }
    .prose p {
      margin-bottom: 1rem;
      line-height: 1.6;
    }
    .prose ul, .prose ol {
      margin-bottom: 1rem;
      padding-left: 1.5rem;
    }
    .prose li {
      margin-bottom: 0.25rem;
      line-height: 1.6;
    }
    .prose ul li {
      list-style-type: disc;
    }
    .prose ol li {
      list-style-type: decimal;
    }
    .prose blockquote {
      border-left: 4px solid #e5e7eb;
      padding-left: 1rem;
      margin: 1rem 0;
      font-style: italic;
      color: #6b7280;
    }
    .prose code {
      background-color: #f3f4f6;
      padding: 0.125rem 0.25rem;
      border-radius: 0.25rem;
      font-size: 0.875rem;
      font-family: ui-monospace, SFMono-Regular, "Roboto Mono", "Cascadia Code", "Source Code Pro", Menlo, Consolas, "DejaVu Sans Mono", monospace;
    }
    .prose pre {
      background-color: #1f2937;
      color: #e5e7eb;
      padding: 0.75rem;
      border-radius: 0.375rem;
      font-size: 0.875rem;
      overflow-x: auto;
      margin: 1rem 0;
    }
    .prose pre code {
      background-color: transparent;
      padding: 0;
      color: inherit;
    }
    .prose strong {
      font-weight: 600;
      color: #111827;
    }
    .prose em {
      font-style: italic;
    }
    .prose a {
      color: #2563eb;
      text-decoration: underline;
    }
    .prose a:hover {
      color: #1d4ed8;
    }
  </style>
</head>
<body class="bg-gray-50 font-sans">
  <div class="max-w-7xl mx-auto">
    <header class="py-8 px-6 bg-white shadow-sm border-b">
      <h1 class="text-3xl font-bold text-gray-900">RP2350 C from Scratch</h1>
      <div class="text-gray-600 mt-2 prose"><p>How to use RP2350 without any SDK or library code</p>
</div>
    </header>
    
    <main class="block lg:flex min-h-screen">
      
    
    <!-- File Header: linker.ld -->
    <div class="bg-gray-100 border-b-2 border-gray-300 lg:hidden w-full">
      <div class="w-full lg:w-2/5 bg-gray-50 border-r border-gray-300">
        <div class="p-6">
          <h2 class="text-xl font-semibold text-gray-800 mb-2">
            <svg class="inline-block w-4 h-4 mr-2 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>
            </svg>
            linker.ld
          </h2>
        </div>
      </div>
      <div class="hidden lg:block w-3/5 bg-gray-100">
        <div class="p-6">
          <div class="h-full min-h-[3rem] flex items-center">
            <span class="text-gray-500 text-sm italic">Source file</span>
          </div>
        </div>
      </div>
    </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <h1>rp2350 from scratch</h1>
<p>This documentation is generated with <a href="https://github.com/upvalue/litsdoc">litsdoc</a></p>
<p>It&#39;s largely derived from the <a href="https://datasheets.raspberrypi.com/rp2350/rp2350-datasheet.pdf">RP2350 datasheet</a></p>
<h1>Linker script</h1>
<p>The first file is the linker script which describes the layout
of our program in memory. <a href="https://mcyoung.xyz/2021/06/01/linker-script/">Everything you never wanted to know about linker script</a> was very helpful
and good to consult directly. The linker script will actually be used at the very end of the compilation process, once our code has been
compiled to ARM binary code.</p>

              </div>
            </div>
          </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>The MEMORY statement controls how memory addresses are allocated within our program. In higher level programming, when
we talk about memory, we talk about it as though it&#39;s one contiguous area that lives in RAM.</p>
<p>On this system (and in other low-level contexts), addresses in memory can have special meanings which are handled at the layers
beneath us. For example, we might load from a memory address and instead of reading from the system&#39;s (relatively low) RAM it
might be read from the much larger flash memory. The system handles this transparently for us, but it&#39;s up to us to make sure we
use the right addresses and use supported operations with those addresses (some memory for example can&#39;t contain executable code).</p>
<p>Magic memory addresses and registers are also how we interact with system processes, setting up functionality like the GPIO pins
or PSRAM. At the point we&#39;re starting at, there is no code defined to handle stuff like this, though it&#39;d normally be handled
by the SDK or hardware abstraction layer in a higher level program.</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>MEMORY {</span></span></code></pre>
              </div>
            </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>The flash memory is where our program lives; in the datasheet it&#39;s called XIP (executable in place) and exposed at the 
memory address 0x1000000.</p>
<p>Notice that we also define whether the memory can be (r)ead, e(x)ecuted or (w)ritten to</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>FLASH(rx): ORIGIN = 0x10000000, LENGTH = 2M</span></span></code></pre>
              </div>
            </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>The RP2350 has 520kb of SRAM which we use for the program stack and a few other things.
Both of the memory addresses here come from <a href="https://datasheets.raspberrypi.com/rp2350/rp2350-datasheet.pdf#page=31">pg 30</a> of the datasheet</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>SRAM(rwx): ORIGIN = 0x20000000, LENGTH = 520K</span></span>
<span class="line"><span>}</span></span></code></pre>
              </div>
            </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>The second portion of our linker script is SECTIONS; a section is a named block of data.
The actual data of these sections will be supplied either by us or the C compiler later, 
but this tells the linker how to lay them out when linking.</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>SECTIONS {</span></span></code></pre>
              </div>
            </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>The init section is the very beginning of our program. For us, it just contains
a few magical constants that will be explained later.</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>.init :{</span></span></code></pre>
              </div>
            </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>. is the &quot;current location counter&quot;. What we&#39;re doing here is aligning it to a 4-byte boundary.</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>. = ALIGN(4);</span></span></code></pre>
              </div>
            </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>This basically says &quot;take the .init section from the object files and place it here&quot;</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>*(.init);</span></span></code></pre>
              </div>
            </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>And then whatever comes after this should also be 4-byte aligned</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>. = ALIGN(4);</span></span></code></pre>
              </div>
            </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>Our program is put into flash memory with this directive.</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>} >FLASH</span></span></code></pre>
              </div>
            </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>The text section is where the bulk of our program code will go. We&#39;re also putting 
another section, rodata (&quot;read only data&quot;) along with it. .rodata contains
constants.</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>.text :{</span></span>
<span class="line"><span>    . = ALIGN(4);</span></span></code></pre>
              </div>
            </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>This specific directive is saying put any section named .text and any section
beginning with .text (the <code class="bg-gray-100 px-1 py-0.5 rounded text-sm font-mono">.text*</code> part) here</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>*(.text .text*);</span></span>
<span class="line"><span>    *(.rodata .rodata*);</span></span>
<span class="line"><span>    . = ALIGN(4);</span></span>
<span class="line"><span>  } >FLASH</span></span></code></pre>
              </div>
            </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>.data stores global constants</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>.data :{ </span></span>
<span class="line"><span>    . = ALIGN(4);</span></span>
<span class="line"><span>    *(.data .data*);</span></span>
<span class="line"><span>    . = ALIGN(4);</span></span></code></pre>
              </div>
            </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>Notice that there is a different directive here: constants are 
loaded from flash memory, but stored in RAM (because they may
be written to)</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>} >SRAM AT>FLASH</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  stack_start = ORIGIN(SRAM) + LENGTH(SRAM);</span></span>
<span class="line"><span>}</span></span></code></pre>
              </div>
            </div>
    <!-- File Header: pico.c -->
    <div class="bg-gray-100 border-b-2 border-gray-300 lg:hidden w-full">
      <div class="w-full lg:w-2/5 bg-gray-50 border-r border-gray-300">
        <div class="p-6">
          <h2 class="text-xl font-semibold text-gray-800 mb-2">
            <svg class="inline-block w-4 h-4 mr-2 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>
            </svg>
            pico.c
          </h2>
        </div>
      </div>
      <div class="hidden lg:block w-3/5 bg-gray-100">
        <div class="p-6">
          <div class="h-full min-h-[3rem] flex items-center">
            <span class="text-gray-500 text-sm italic">Source file</span>
          </div>
        </div>
      </div>
    </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>Register access primitives.
See <a href="https://datasheets.raspberrypi.com/rp2350/rp2350-datasheet.pdf#page=27">page
26</a>
of the datasheet</p>
<p>Basically, by doing some magical memory stuff to a specific address, we can
modify registers. Register here doesn&#39;t refer to the base registers available
to assembly like r0, r1 etc, but also to APB (&quot;advanced peripheral bus&quot;)
registers. APB registers are how we interact with other components on the
device, like general purpose I/O pins and UART (universal asynchronous
receiver/transmitter, serial monitor).</p>
<p>Since we&#39;ll be doing this all the time we define a set of macros for this</p>

              </div>
            </div>
          </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>REG(x) dereferences a memory address</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> REG</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">x</span><span style="color:#E1E4E8">) (</span><span style="color:#F97583">*</span><span style="color:#E1E4E8">((</span><span style="color:#F97583">volatile</span><span style="color:#F97583"> unsigned</span><span style="color:#F97583"> int</span><span style="color:#F97583"> *</span><span style="color:#E1E4E8">)(x)))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> REG_ALIAS_RW_BITS</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">0000</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> REG_ALIAS_XOR_BITS</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">1000</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> REG_ALIAS_SET_BITS</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">2000</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> REG_ALIAS_CLR_BITS</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">3000</span></span></code></pre>
              </div>
            </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>Bus endpoints. See <a href="https://datasheets.raspberrypi.com/rp2350/rp2350-datasheet.pdf#page=32">page
32</a>
of the datasheet. This page is where the _BASE constants come from. This
table also links out to the individual sections for each bus.</p>

              </div>
            </div>
          </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>Resets ([chapter
7(<a href="https://datasheets.raspberrypi.com/rp2350/rp2350-datasheet.pdf#page=495">https://datasheets.raspberrypi.com/rp2350/rp2350-datasheet.pdf#page=495</a>)))
of the datasheet.</p>
<p>We use the reset base to make subsystem resets. Basically letting the system
know that we&#39;re ready to use GPIO, UART and so on, by for each of those
subsystems clearing the FRCE_ON (&quot;force on&quot;) reset register and then setting
the RESET_DONE register which... resets the reset, making the subsystem ready
for our use.</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESETS_BASE</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">40020000</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESETS_DONE_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESET_IO_BANK0_BITS</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 6</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESET_PADS_BANK0_BITS</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 9</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESET_PIO0_BITS</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 11</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESET_PLL_SYS_BITS</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 14</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESET_PWM_BITS</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 16</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESET_TIMER0_BITS</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 23</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESET_UART0_BITS</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 26</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESET_UART1_BITS</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 27</span><span style="color:#E1E4E8">)</span></span></code></pre>
              </div>
            </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>The general purpose I/O bank (<a href="https://datasheets.raspberrypi.com/rp2350/rp2350-datasheet.pdf#page=588">chapter
9</a>)
is a set of pins we can manipulate to interact with various components on the
board as well as ones we might choose to connect (for example if we e.g. a
soldered an LED circuit to one of the pins).</p>
<p>Despite the name, in some cases GPIO pins are constrained in what they can do
based on the chip&#39;s design. See the table in the chapter for an exact list of
functionality.</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> IO_BANK0_BASE</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">40028000</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> IO_BANK0_GPIO0_CTRL_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 0</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">8</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> IO_BANK0_GPIO1_CTRL_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">8</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> IO_BANK0_GPIO7_CTRL_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 7</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">8</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> IO_BANK0_GPIO23_CTRL_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 23</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">8</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> IO_BANK0_GPIO24_CTRL_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 24</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">8</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> IO_BANK0_GPIO25_CTRL_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 25</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">8</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> GPIO_FUNC_UART</span><span style="color:#79B8FF"> 2</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> GPIO_FUNC_PWM</span><span style="color:#79B8FF"> 4</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> GPIO_FUNC_SIO</span><span style="color:#79B8FF"> 5</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> GPIO_FUNC_PIO0</span><span style="color:#79B8FF"> 6</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_BASE</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">40038000</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO0_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO1_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO7_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 7</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO23_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 23</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO24_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 24</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO25_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 25</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO0_ISO_BITS</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 8</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO0_OD_BITS</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 7</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO0_IE_BITS</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 6</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO0_PUE_BITS</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 3</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO0_SCHMITT_BITS</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_BASE</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">d0000000</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_CPUID_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">0</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_GPIO_OE_CLR_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">40</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_GPIO_OUT_CLR_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">20</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_GPIO_OE_SET_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">38</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_GPIO_OUT_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">10</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_GPIO_OUT_XOR_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">28</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_FIFO_ST_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">50</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_FIFO_ST_VLD_BITS</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 0</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_FIFO_ST_RDY_BITS</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 1</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_FIFO_WR_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">54</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_FIFO_RD_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">58</span></span></code></pre>
              </div>
            </div>
    <!-- File Header: main.c -->
    <div class="bg-gray-100 border-b-2 border-gray-300 lg:hidden w-full">
      <div class="w-full lg:w-2/5 bg-gray-50 border-r border-gray-300">
        <div class="p-6">
          <h2 class="text-xl font-semibold text-gray-800 mb-2">
            <svg class="inline-block w-4 h-4 mr-2 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>
            </svg>
            main.c
          </h2>
        </div>
      </div>
      <div class="hidden lg:block w-3/5 bg-gray-100">
        <div class="p-6">
          <div class="h-full min-h-[3rem] flex items-center">
            <span class="text-gray-500 text-sm italic">Source file</span>
          </div>
        </div>
      </div>
    </div>
          <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span style="color:#F97583">#include</span><span style="color:#9ECBFF"> "pico.c"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">__attribute__</span><span style="color:#E1E4E8">((naked)) </span><span style="color:#F97583">void</span><span style="color:#B392F0"> start</span><span style="color:#E1E4E8">() {</span></span></code></pre>
            </div>
          </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>Reset peripherals we&#39;re going to use; the first register we use is the
FRCE_ON register. (Since it has an offset of 0x0, there&#39;s no additional
definition for it).</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span style="color:#B392F0">REG</span><span style="color:#E1E4E8">(RESETS_BASE </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> REG_ALIAS_CLR_BITS) </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#E1E4E8">      RESET_IO_BANK0_BITS </span><span style="color:#F97583">|</span><span style="color:#E1E4E8"> RESET_PADS_BANK0_BITS;</span></span></code></pre>
              </div>
            </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>Then RESET_DONE</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span style="color:#F97583">while</span><span style="color:#E1E4E8"> ((</span><span style="color:#F97583">~</span><span style="color:#B392F0">REG</span><span style="color:#E1E4E8">(RESETS_BASE </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> RESETS_DONE_OFFSET)) </span><span style="color:#F97583">&#x26;</span></span>
<span class="line"><span style="color:#E1E4E8">         (RESET_IO_BANK0_BITS </span><span style="color:#F97583">|</span><span style="color:#E1E4E8"> RESET_PADS_BANK0_BITS))</span></span>
<span class="line"><span style="color:#E1E4E8">    ;</span></span></code></pre>
              </div>
            </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>Here we&#39;re saying that we&#39;re going to use PIN 7 for SIO (single purpose
input/output) by selecting function 5</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span style="color:#B392F0">REG</span><span style="color:#E1E4E8">(IO_BANK0_BASE </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> IO_BANK0_GPIO7_CTRL_OFFSET) </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> GPIO_FUNC_SIO;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  REG</span><span style="color:#E1E4E8">(PADS_BANK0_BASE </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> PADS_BANK0_GPIO7_OFFSET </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> REG_ALIAS_CLR_BITS) </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#E1E4E8">      PADS_BANK0_GPIO0_ISO_BITS;</span></span>
<span class="line"><span style="color:#B392F0">  REG</span><span style="color:#E1E4E8">(SIO_BASE </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> SIO_GPIO_OE_SET_OFFSET) </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 7</span><span style="color:#E1E4E8">;</span></span></code></pre>
              </div>
            </div>
          <div class="bg-white border-b border-gray-200 lg:hidden">
            <div class="p-6">
              <div class="prose">
                <p>Set up GPIO PIN 7</p>

              </div>
            </div>
          </div>
            <div class="bg-gray-900 border-b border-gray-200 lg:hidden">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span style="color:#F97583">for</span><span style="color:#E1E4E8"> (;;) {</span></span>
<span class="line"><span style="color:#B392F0">    REG</span><span style="color:#E1E4E8">(SIO_BASE </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> SIO_GPIO_OUT_XOR_OFFSET) </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 7</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">unsigned</span><span style="color:#F97583"> int</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">; i </span><span style="color:#F97583">!=</span><span style="color:#79B8FF"> 1000000</span><span style="color:#E1E4E8">; i</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">      ;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
              </div>
            </div>
    <div class="hidden lg:flex lg:flex-col w-full">
      
    <!-- File Header: linker.ld -->
    <div class="bg-gray-100 border-b-2 border-gray-300 lg:flex w-full">
      <div class="w-full lg:w-2/5 bg-gray-50 border-r border-gray-300">
        <div class="p-6">
          <h2 class="text-xl font-semibold text-gray-800 mb-2">
            <svg class="inline-block w-4 h-4 mr-2 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>
            </svg>
            linker.ld
          </h2>
        </div>
      </div>
      <div class="hidden lg:block w-3/5 bg-gray-100">
        <div class="p-6">
          <div class="h-full min-h-[3rem] flex items-center">
            <span class="text-gray-500 text-sm italic">Source file</span>
          </div>
        </div>
      </div>
    </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <h1>rp2350 from scratch</h1>
<p>This documentation is generated with <a href="https://github.com/upvalue/litsdoc">litsdoc</a></p>
<p>It&#39;s largely derived from the <a href="https://datasheets.raspberrypi.com/rp2350/rp2350-datasheet.pdf">RP2350 datasheet</a></p>
<h1>Linker script</h1>
<p>The first file is the linker script which describes the layout
of our program in memory. <a href="https://mcyoung.xyz/2021/06/01/linker-script/">Everything you never wanted to know about linker script</a> was very helpful
and good to consult directly. The linker script will actually be used at the very end of the compilation process, once our code has been
compiled to ARM binary code.</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <div class="h-full min-h-[4rem]"></div>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>The MEMORY statement controls how memory addresses are allocated within our program. In higher level programming, when
we talk about memory, we talk about it as though it&#39;s one contiguous area that lives in RAM.</p>
<p>On this system (and in other low-level contexts), addresses in memory can have special meanings which are handled at the layers
beneath us. For example, we might load from a memory address and instead of reading from the system&#39;s (relatively low) RAM it
might be read from the much larger flash memory. The system handles this transparently for us, but it&#39;s up to us to make sure we
use the right addresses and use supported operations with those addresses (some memory for example can&#39;t contain executable code).</p>
<p>Magic memory addresses and registers are also how we interact with system processes, setting up functionality like the GPIO pins
or PSRAM. At the point we&#39;re starting at, there is no code defined to handle stuff like this, though it&#39;d normally be handled
by the SDK or hardware abstraction layer in a higher level program.</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>MEMORY {</span></span></code></pre>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>The flash memory is where our program lives; in the datasheet it&#39;s called XIP (executable in place) and exposed at the 
memory address 0x1000000.</p>
<p>Notice that we also define whether the memory can be (r)ead, e(x)ecuted or (w)ritten to</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>FLASH(rx): ORIGIN = 0x10000000, LENGTH = 2M</span></span></code></pre>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>The RP2350 has 520kb of SRAM which we use for the program stack and a few other things.
Both of the memory addresses here come from <a href="https://datasheets.raspberrypi.com/rp2350/rp2350-datasheet.pdf#page=31">pg 30</a> of the datasheet</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>SRAM(rwx): ORIGIN = 0x20000000, LENGTH = 520K</span></span>
<span class="line"><span>}</span></span></code></pre>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>The second portion of our linker script is SECTIONS; a section is a named block of data.
The actual data of these sections will be supplied either by us or the C compiler later, 
but this tells the linker how to lay them out when linking.</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>SECTIONS {</span></span></code></pre>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>The init section is the very beginning of our program. For us, it just contains
a few magical constants that will be explained later.</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>.init :{</span></span></code></pre>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>. is the &quot;current location counter&quot;. What we&#39;re doing here is aligning it to a 4-byte boundary.</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>. = ALIGN(4);</span></span></code></pre>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>This basically says &quot;take the .init section from the object files and place it here&quot;</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>*(.init);</span></span></code></pre>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>And then whatever comes after this should also be 4-byte aligned</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>. = ALIGN(4);</span></span></code></pre>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>Our program is put into flash memory with this directive.</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>} >FLASH</span></span></code></pre>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>The text section is where the bulk of our program code will go. We&#39;re also putting 
another section, rodata (&quot;read only data&quot;) along with it. .rodata contains
constants.</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>.text :{</span></span>
<span class="line"><span>    . = ALIGN(4);</span></span></code></pre>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>This specific directive is saying put any section named .text and any section
beginning with .text (the <code class="bg-gray-100 px-1 py-0.5 rounded text-sm font-mono">.text*</code> part) here</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>*(.text .text*);</span></span>
<span class="line"><span>    *(.rodata .rodata*);</span></span>
<span class="line"><span>    . = ALIGN(4);</span></span>
<span class="line"><span>  } >FLASH</span></span></code></pre>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>.data stores global constants</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>.data :{ </span></span>
<span class="line"><span>    . = ALIGN(4);</span></span>
<span class="line"><span>    *(.data .data*);</span></span>
<span class="line"><span>    . = ALIGN(4);</span></span></code></pre>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>Notice that there is a different directive here: constants are 
loaded from flash memory, but stored in RAM (because they may
be written to)</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span>} >SRAM AT>FLASH</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  stack_start = ORIGIN(SRAM) + LENGTH(SRAM);</span></span>
<span class="line"><span>}</span></span></code></pre>
                </div>
              </div>
            </div>
    <!-- File Header: pico.c -->
    <div class="bg-gray-100 border-b-2 border-gray-300 lg:flex w-full">
      <div class="w-full lg:w-2/5 bg-gray-50 border-r border-gray-300">
        <div class="p-6">
          <h2 class="text-xl font-semibold text-gray-800 mb-2">
            <svg class="inline-block w-4 h-4 mr-2 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>
            </svg>
            pico.c
          </h2>
        </div>
      </div>
      <div class="hidden lg:block w-3/5 bg-gray-100">
        <div class="p-6">
          <div class="h-full min-h-[3rem] flex items-center">
            <span class="text-gray-500 text-sm italic">Source file</span>
          </div>
        </div>
      </div>
    </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>Register access primitives.
See <a href="https://datasheets.raspberrypi.com/rp2350/rp2350-datasheet.pdf#page=27">page
26</a>
of the datasheet</p>
<p>Basically, by doing some magical memory stuff to a specific address, we can
modify registers. Register here doesn&#39;t refer to the base registers available
to assembly like r0, r1 etc, but also to APB (&quot;advanced peripheral bus&quot;)
registers. APB registers are how we interact with other components on the
device, like general purpose I/O pins and UART (universal asynchronous
receiver/transmitter, serial monitor).</p>
<p>Since we&#39;ll be doing this all the time we define a set of macros for this</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <div class="h-full min-h-[4rem]"></div>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>REG(x) dereferences a memory address</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> REG</span><span style="color:#E1E4E8">(</span><span style="color:#FFAB70">x</span><span style="color:#E1E4E8">) (</span><span style="color:#F97583">*</span><span style="color:#E1E4E8">((</span><span style="color:#F97583">volatile</span><span style="color:#F97583"> unsigned</span><span style="color:#F97583"> int</span><span style="color:#F97583"> *</span><span style="color:#E1E4E8">)(x)))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> REG_ALIAS_RW_BITS</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">0000</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> REG_ALIAS_XOR_BITS</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">1000</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> REG_ALIAS_SET_BITS</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">2000</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> REG_ALIAS_CLR_BITS</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">3000</span></span></code></pre>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>Bus endpoints. See <a href="https://datasheets.raspberrypi.com/rp2350/rp2350-datasheet.pdf#page=32">page
32</a>
of the datasheet. This page is where the _BASE constants come from. This
table also links out to the individual sections for each bus.</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <div class="h-full min-h-[4rem]"></div>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>Resets ([chapter
7(<a href="https://datasheets.raspberrypi.com/rp2350/rp2350-datasheet.pdf#page=495">https://datasheets.raspberrypi.com/rp2350/rp2350-datasheet.pdf#page=495</a>)))
of the datasheet.</p>
<p>We use the reset base to make subsystem resets. Basically letting the system
know that we&#39;re ready to use GPIO, UART and so on, by for each of those
subsystems clearing the FRCE_ON (&quot;force on&quot;) reset register and then setting
the RESET_DONE register which... resets the reset, making the subsystem ready
for our use.</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESETS_BASE</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">40020000</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESETS_DONE_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESET_IO_BANK0_BITS</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 6</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESET_PADS_BANK0_BITS</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 9</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESET_PIO0_BITS</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 11</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESET_PLL_SYS_BITS</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 14</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESET_PWM_BITS</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 16</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESET_TIMER0_BITS</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 23</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESET_UART0_BITS</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 26</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> RESET_UART1_BITS</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 27</span><span style="color:#E1E4E8">)</span></span></code></pre>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>The general purpose I/O bank (<a href="https://datasheets.raspberrypi.com/rp2350/rp2350-datasheet.pdf#page=588">chapter
9</a>)
is a set of pins we can manipulate to interact with various components on the
board as well as ones we might choose to connect (for example if we e.g. a
soldered an LED circuit to one of the pins).</p>
<p>Despite the name, in some cases GPIO pins are constrained in what they can do
based on the chip&#39;s design. See the table in the chapter for an exact list of
functionality.</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> IO_BANK0_BASE</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">40028000</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> IO_BANK0_GPIO0_CTRL_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 0</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">8</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> IO_BANK0_GPIO1_CTRL_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">8</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> IO_BANK0_GPIO7_CTRL_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 7</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">8</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> IO_BANK0_GPIO23_CTRL_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 23</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">8</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> IO_BANK0_GPIO24_CTRL_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 24</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">8</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> IO_BANK0_GPIO25_CTRL_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 25</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">8</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> GPIO_FUNC_UART</span><span style="color:#79B8FF"> 2</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> GPIO_FUNC_PWM</span><span style="color:#79B8FF"> 4</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> GPIO_FUNC_SIO</span><span style="color:#79B8FF"> 5</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> GPIO_FUNC_PIO0</span><span style="color:#79B8FF"> 6</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_BASE</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">40038000</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO0_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO1_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO7_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 7</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO23_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 23</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO24_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 24</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO25_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span><span style="color:#F97583"> +</span><span style="color:#79B8FF"> 25</span><span style="color:#F97583"> *</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">4</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO0_ISO_BITS</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 8</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO0_OD_BITS</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 7</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO0_IE_BITS</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 6</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO0_PUE_BITS</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 3</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> PADS_BANK0_GPIO0_SCHMITT_BITS</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_BASE</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">d0000000</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_CPUID_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">0</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_GPIO_OE_CLR_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">40</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_GPIO_OUT_CLR_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">20</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_GPIO_OE_SET_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">38</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_GPIO_OUT_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">10</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_GPIO_OUT_XOR_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">28</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_FIFO_ST_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">50</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_FIFO_ST_VLD_BITS</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 0</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_FIFO_ST_RDY_BITS</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 1</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_FIFO_WR_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">54</span></span>
<span class="line"><span style="color:#F97583">#define</span><span style="color:#B392F0"> SIO_FIFO_RD_OFFSET</span><span style="color:#F97583"> 0x</span><span style="color:#79B8FF">58</span></span></code></pre>
                </div>
              </div>
            </div>
    <!-- File Header: main.c -->
    <div class="bg-gray-100 border-b-2 border-gray-300 lg:flex w-full">
      <div class="w-full lg:w-2/5 bg-gray-50 border-r border-gray-300">
        <div class="p-6">
          <h2 class="text-xl font-semibold text-gray-800 mb-2">
            <svg class="inline-block w-4 h-4 mr-2 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>
            </svg>
            main.c
          </h2>
        </div>
      </div>
      <div class="hidden lg:block w-3/5 bg-gray-100">
        <div class="p-6">
          <div class="h-full min-h-[3rem] flex items-center">
            <span class="text-gray-500 text-sm italic">Source file</span>
          </div>
        </div>
      </div>
    </div>
          <div class="hidden lg:flex w-full">
            <div class="w-2/5 bg-white border-r border-gray-200">
              <div class="p-6">
                <div class="h-full min-h-[4rem]"></div>
              </div>
            </div>
            <div class="w-3/5 bg-gray-900">
              <div class="p-6">
                <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span style="color:#F97583">#include</span><span style="color:#9ECBFF"> "pico.c"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">__attribute__</span><span style="color:#E1E4E8">((naked)) </span><span style="color:#F97583">void</span><span style="color:#B392F0"> start</span><span style="color:#E1E4E8">() {</span></span></code></pre>
              </div>
            </div>
          </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>Reset peripherals we&#39;re going to use; the first register we use is the
FRCE_ON register. (Since it has an offset of 0x0, there&#39;s no additional
definition for it).</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span style="color:#B392F0">REG</span><span style="color:#E1E4E8">(RESETS_BASE </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> REG_ALIAS_CLR_BITS) </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#E1E4E8">      RESET_IO_BANK0_BITS </span><span style="color:#F97583">|</span><span style="color:#E1E4E8"> RESET_PADS_BANK0_BITS;</span></span></code></pre>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>Then RESET_DONE</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span style="color:#F97583">while</span><span style="color:#E1E4E8"> ((</span><span style="color:#F97583">~</span><span style="color:#B392F0">REG</span><span style="color:#E1E4E8">(RESETS_BASE </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> RESETS_DONE_OFFSET)) </span><span style="color:#F97583">&#x26;</span></span>
<span class="line"><span style="color:#E1E4E8">         (RESET_IO_BANK0_BITS </span><span style="color:#F97583">|</span><span style="color:#E1E4E8"> RESET_PADS_BANK0_BITS))</span></span>
<span class="line"><span style="color:#E1E4E8">    ;</span></span></code></pre>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>Here we&#39;re saying that we&#39;re going to use PIN 7 for SIO (single purpose
input/output) by selecting function 5</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span style="color:#B392F0">REG</span><span style="color:#E1E4E8">(IO_BANK0_BASE </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> IO_BANK0_GPIO7_CTRL_OFFSET) </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> GPIO_FUNC_SIO;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  REG</span><span style="color:#E1E4E8">(PADS_BANK0_BASE </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> PADS_BANK0_GPIO7_OFFSET </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> REG_ALIAS_CLR_BITS) </span><span style="color:#F97583">=</span></span>
<span class="line"><span style="color:#E1E4E8">      PADS_BANK0_GPIO0_ISO_BITS;</span></span>
<span class="line"><span style="color:#B392F0">  REG</span><span style="color:#E1E4E8">(SIO_BASE </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> SIO_GPIO_OE_SET_OFFSET) </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 7</span><span style="color:#E1E4E8">;</span></span></code></pre>
                </div>
              </div>
            </div>
            <div class="hidden lg:flex w-full">
              <div class="w-2/5 bg-white border-r border-gray-200">
                <div class="p-6">
                  <div class="prose">
                    <p>Set up GPIO PIN 7</p>

                  </div>
                </div>
              </div>
              <div class="w-3/5 bg-gray-900">
                <div class="p-6">
                  <pre class="text-sm leading-relaxed overflow-x-auto text-white" style="background-color: transparent; padding: 0; margin: 0;" tabindex="0"><code style="background-color: transparent;"><span class="line"><span style="color:#F97583">for</span><span style="color:#E1E4E8"> (;;) {</span></span>
<span class="line"><span style="color:#B392F0">    REG</span><span style="color:#E1E4E8">(SIO_BASE </span><span style="color:#F97583">+</span><span style="color:#E1E4E8"> SIO_GPIO_OUT_XOR_OFFSET) </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 1</span><span style="color:#F97583"> &#x3C;&#x3C;</span><span style="color:#79B8FF"> 7</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">unsigned</span><span style="color:#F97583"> int</span><span style="color:#E1E4E8"> i </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> 0</span><span style="color:#E1E4E8">; i </span><span style="color:#F97583">!=</span><span style="color:#79B8FF"> 1000000</span><span style="color:#E1E4E8">; i</span><span style="color:#F97583">++</span><span style="color:#E1E4E8">)</span></span>
<span class="line"><span style="color:#E1E4E8">      ;</span></span>
<span class="line"><span style="color:#E1E4E8">  }</span></span>
<span class="line"><span style="color:#E1E4E8">}</span></span></code></pre>
                </div>
              </div>
            </div>
    </div>
    </main>
  </div>
</body>
</html>